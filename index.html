<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will Thorley â€” Profile</title>
  <style>
    :root{
      --bg:#0b63d6; /* blue background */
      --card:#fff;
    }
    *{box-sizing:border-box}
    body{
      font-family:Inter,system-ui,Arial,sans-serif;
      background:var(--bg);
      color:#fff;
      margin:0;
      padding:0;
    }
    .corner-profile{
      position:fixed;top:12px;right:12px;
      display:flex;align-items:center;gap:8px;z-index:20
    }
    .corner-profile img{
      width:56px;height:56px;border-radius:50%;object-fit:cover;
      border:2px solid rgba(255,255,255,0.6)
    }
    .corner-profile #profileName{font-weight:600}
    .container{max-width:980px;margin:90px auto;padding:24px}
    .card{
      background:var(--card);color:#000;
      padding:18px;border-radius:12px;
      box-shadow:0 6px 18px rgba(15,23,42,0.2);
      margin-bottom:18px
    }
    .intro h1{margin:0 0 6px 0}
    .stats-grid{display:flex;gap:18px;margin:12px 0}
    .stats-grid>div{
      background:#f9fafb;
      padding:12px;border-radius:8px;
      min-width:90px;text-align:center
    }
    canvas{background:#eaf6ff;display:block;margin:0 auto;border:2px solid #000}
    .game-help {text-align:center;color:#fff;margin-top:8px}
  </style>
</head>
<body>
  <header class="corner-profile">
    <img id="profilePic" src="assets/profile.jpg" alt="Will Thorley" />
    <div id="profileName">Will Thorley</div>
  </header>

  <main class="container">
    <section class="intro">
      <h1>Will Thorley</h1>
      <p>Player / Coach for <strong>Boston Advantage 2012 Elite</strong>. This page shows wins / losses / ties.</p>
    </section>

    <section id="team-stats" class="card">
      <h2>Boston Advantage 2012 Elite â€” Season Summary</h2>
      <div class="stats-grid">
        <div><strong>Wins</strong><div id="wins">2</div></div>
        <div><strong>Losses</strong><div id="losses">1</div></div>
        <div><strong>Ties</strong><div id="ties">2</div></div>
      </div>
    </section>

    <section class="card">
      <h2>Mini Hockey Game â€” Stick Figure</h2>
      <canvas id="gameCanvas" width="700" height="420" aria-label="Mini hockey game"></canvas>
      <p class="game-help">Move with arrow keys. Press <strong>Space</strong> to shoot when the puck is near your stick.</p>
    </section>
  </main>

  <script>
    // Canvas + context
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    // Skater (stick figure) state
    const player = {
      x: 120,
      y: canvas.height / 2,
      speed: 4,
      dir: 0, // angle in radians (0 = right)
      facing: 'right' // track last direction for stick orientation
    };

    // Puck
    const puck = {
      x: canvas.width / 2,
      y: canvas.height / 2,
      r: 10,
      dx: 0,
      dy: 0
    };

    // Goal (right side)
    const goal = { x: canvas.width - 60, y: canvas.height/2 - 60, w: 40, h: 120 };

    // Keys
    const keys = {};
    document.addEventListener('keydown', e => { keys[e.key] = true; e.preventDefault && e.key !== ' ' && e.preventDefault(); });
    document.addEventListener('keyup', e => { keys[e.key] = false; });

    // Utility: normalize angle from dx/dy
    function angleFromDirection(dx, dy) {
      return Math.atan2(dy, dx);
    }

    // Update logic
    function update() {
      // Movement and facing
      let moved = false;
      if (keys['ArrowUp'])    { player.y -= player.speed; player.dir = -Math.PI/2; player.facing = 'up'; moved = true; }
      if (keys['ArrowDown'])  { player.y += player.speed; player.dir = Math.PI/2; player.facing = 'down'; moved = true; }
      if (keys['ArrowLeft'])  { player.x -= player.speed; player.dir = Math.PI; player.facing = 'left'; moved = true; }
      if (keys['ArrowRight']) { player.x += player.speed; player.dir = 0; player.facing = 'right'; moved = true; }

      // Diagonals: adjust dir to actual composite direction
      let vx = (keys['ArrowRight'] ? 1 : 0) - (keys['ArrowLeft'] ? 1 : 0);
      let vy = (keys['ArrowDown'] ? 1 : 0) - (keys['ArrowUp'] ? 1 : 0);
      if (vx !== 0 || vy !== 0) {
        player.dir = angleFromDirection(vx, vy);
        moved = true;
      }

      // Boundaries
      player.x = Math.max(20, Math.min(canvas.width - 20, player.x));
      player.y = Math.max(30, Math.min(canvas.height - 30, player.y));

      // Soft push if player overlaps puck area
      const dx = puck.x - player.x;
      const dy = puck.y - player.y;
      const dist = Math.sqrt(dx*dx + dy*dy);
      const pushRadius = 28;
      if (dist < pushRadius) {
        // gently nudge the puck away from player center
        puck.dx += (dx/dist) * 0.8;
        puck.dy += (dy/dist) * 0.8;
      }

      // Shoot mechanic: spacebar
      if (keys[' ']) {
        // compute stick end position
        const stickLen = 36;
        const stickEndX = player.x + Math.cos(player.dir) * stickLen;
        const stickEndY = player.y + Math.sin(player.dir) * stickLen;

        const sdx = puck.x - stickEndX;
        const sdy = puck.y - stickEndY;
        const sdist = Math.sqrt(sdx*sdx + sdy*sdy);
        if (sdist < 20) {
          // impulse outward from stick
          puck.dx = Math.cos(player.dir) * 8;
          puck.dy = Math.sin(player.dir) * 8;
        }
      }

      // Puck physics
      puck.x += puck.dx;
      puck.y += puck.dy;
      puck.dx *= 0.985; // friction
      puck.dy *= 0.985;

      // Keep puck inside bounds (bounce softly)
      if (puck.x - puck.r < 0) { puck.x = puck.r; puck.dx *= -0.6; }
      if (puck.x + puck.r > canvas.width) { puck.x = canvas.width - puck.r; puck.dx *= -0.6; }
      if (puck.y - puck.r < 0) { puck.y = puck.r; puck.dy *= -0.6; }
      if (puck.y + puck.r > canvas.height) { puck.y = canvas.height - puck.r; puck.dy *= -0.6; }

      // Goal detection
      if (puck.x + puck.r > goal.x && puck.y > goal.y && puck.y < goal.y + goal.h) {
        // simple goal reaction
        setTimeout(() => alert('GOAL! ðŸ¥…'), 10);
        resetPositions();
      }
    }

    // Draw stick figure player
    function drawPlayer(px, py, dir) {
      // Parameters for figure
      const headR = 9;
      const bodyLen = 22;
      const armLen = 18;
      const legLen = 18;

      // Head
      ctx.beginPath();
      ctx.arc(px, py - 18, headR, 0, Math.PI*2);
      ctx.fillStyle = '#222';
      ctx.fill();

      // Body (line)
      const bodyTopX = px;
      const bodyTopY = py - 18 + headR;
      const bodyBottomX = px;
      const bodyBottomY = bodyTopY + bodyLen;
      ctx.strokeStyle = '#222';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(bodyTopX, bodyTopY);
      ctx.lineTo(bodyBottomX, bodyBottomY);
      ctx.stroke();

      // Arms: left and right - draw relative, but one arm will hold stick
      // compute stick end (right arm by default, rotated by dir)
      const stickLen = 36;
      const stickAngle = dir;
      const stickStartX = px + Math.cos(stickAngle) * 6; // near chest
      const stickStartY = py - 6 + Math.sin(stickAngle) * 6;
      const stickEndX = px + Math.cos(stickAngle) * (6 + stickLen);
      const stickEndY = py - 6 + Math.sin(stickAngle) * (6 + stickLen);

      // left arm (simple)
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(px - 12, py - 2);
      ctx.lineTo(px - 2, py + 6);
      ctx.stroke();

      // right arm (holding stick)
      ctx.lineWidth = 4;
      ctx.strokeStyle = '#5a3b1f'; // stick color
      ctx.beginPath();
      ctx.moveTo(px + 6, py - 2);
      ctx.lineTo(stickEndX, stickEndY);
      ctx.stroke();

      // Legs
      ctx.strokeStyle = '#222';
      ctx.lineWidth = 3;
      ctx.beginPath();
      ctx.moveTo(bodyBottomX, bodyBottomY);
      ctx.lineTo(bodyBottomX - 10, bodyBottomY + legLen);
      ctx.moveTo(bodyBottomX, bodyBottomY);
      ctx.lineTo(bodyBottomX + 10, bodyBottomY + legLen);
      ctx.stroke();

      // small skate rectangles
      ctx.fillStyle = '#000';
      ctx.fillRect(bodyBottomX - 14, bodyBottomY + legLen - 4, 20, 5);
    }

    // Draw everything
    function draw() {
      // Clear
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // Draw rink background (simple)
      // center line
      ctx.fillStyle = '#eaf6ff';
      ctx.fillRect(0,0,canvas.width,canvas.height);

      // Goal (red box)
      ctx.fillStyle = '#d33';
      ctx.fillRect(goal.x, goal.y, goal.w, goal.h);

      // Draw puck
      ctx.beginPath();
      ctx.arc(puck.x, puck.y, puck.r, 0, Math.PI*2);
      ctx.fillStyle = '#111';
      ctx.fill();

      // Draw player (stick figure) at player.x, player.y
      drawPlayer(player.x, player.y, player.dir);
    }

    function resetPositions() {
      player.x = 120;
      player.y = canvas.height / 2;
      player.dir = 0;
      puck.x = canvas.width / 2;
      puck.y = canvas.height / 2;
      puck.dx = 0;
      puck.dy = 0;
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    // initialize
    resetPositions();
    loop();
  </script>
</body>
</html>
