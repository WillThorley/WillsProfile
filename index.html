<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Will Thorley â€” Profile</title>
  <style>
    body{
      font-family:Inter,system-ui,Arial,sans-serif;
      background:#0b63d6;
      color:#fff;
      margin:0;
      padding:0;
    }
    .container{max-width:960px;margin:20px auto;padding:20px}
    canvas{background:#eaf6ff;display:block;margin:20px auto;border:2px solid #000}
    .menu{text-align:center;margin:20px}
    button{padding:10px 18px;margin:6px;font-size:16px;cursor:pointer;border-radius:8px;border:none}
  </style>
</head>
<body>
  <main class="container">
    <h1>Mini Hockey Game</h1>
    <div class="menu" id="menu">
      <p>Select Game Mode:</p>
      <button onclick="startGame('ai')">1 Player vs AI</button>
      <button onclick="startGame('pvp')">2 Players</button>
    </div>
    <canvas id="gameCanvas" width="700" height="420" style="display:none"></canvas>
    <p style="text-align:center">P1: Arrows + Space | P2: WASD + Shift</p>
  </main>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');

    let gameMode = null;
    let players = [];
    let puck, goal;

    const keys = {};

    document.addEventListener('keydown', e => { keys[e.key] = true; });
    document.addEventListener('keyup', e => { keys[e.key] = false; });

    function startGame(mode){
      document.getElementById('menu').style.display = "none";
      canvas.style.display = "block";
      gameMode = mode;
      init();
      loop();
    }

    function init(){
      players = [
        {x:120,y:canvas.height/2,dir:0,speed:4,controls:{up:'ArrowUp',down:'ArrowDown',left:'ArrowLeft',right:'ArrowRight',shoot:' '}},
      ];
      if(gameMode === 'pvp'){
        players.push({x:canvas.width-120,y:canvas.height/2,dir:Math.PI,speed:4,controls:{up:'w',down:'s',left:'a',right:'d',shoot:'Shift'}});
      } else {
        players.push({x:canvas.width-120,y:canvas.height/2,dir:Math.PI,speed:3,isAI:true});
      }

      puck = {x:canvas.width/2,y:canvas.height/2,r:10,dx:0,dy:0};
      goal = {x:canvas.width-60,y:canvas.height/2-60,w:40,h:120};
    }

    function update(){
      players.forEach((p,i)=>{
        if(!p.isAI){
          if(keys[p.controls.up]) p.y-=p.speed;
          if(keys[p.controls.down]) p.y+=p.speed;
          if(keys[p.controls.left]) p.x-=p.speed;
          if(keys[p.controls.right]) p.x+=p.speed;

          let vx=(keys[p.controls.right]?1:0)-(keys[p.controls.left]?1:0);
          let vy=(keys[p.controls.down]?1:0)-(keys[p.controls.up]?1:0);
          if(vx||vy) p.dir=Math.atan2(vy,vx);

          if(keys[p.controls.shoot]){
            tryShoot(p);
          }
        } else {
          // Simple AI: chase puck
          let dx=puck.x-p.x,dy=puck.y-p.y;
          if(Math.abs(dx)>4) p.x+=Math.sign(dx)*p.speed*0.8;
          if(Math.abs(dy)>4) p.y+=Math.sign(dy)*p.speed*0.8;
          p.dir=Math.atan2(dy,dx);
          // auto shoot if close
          if(Math.hypot(dx,dy)<30) tryShoot(p);
        }

        // Boundaries
        p.x=Math.max(20,Math.min(canvas.width-20,p.x));
        p.y=Math.max(30,Math.min(canvas.height-30,p.y));
      });

      // Puck physics
      puck.x+=puck.dx; puck.y+=puck.dy;
      puck.dx*=0.985; puck.dy*=0.985;
      if(puck.x-puck.r<0){puck.x=puck.r;puck.dx*=-0.6;}
      if(puck.x+puck.r>canvas.width){puck.x=canvas.width-puck.r;puck.dx*=-0.6;}
      if(puck.y-puck.r<0){puck.y=puck.r;puck.dy*=-0.6;}
      if(puck.y+puck.r>canvas.height){puck.y=canvas.height-puck.r;puck.dy*=-0.6;}

      // Goal
      if(puck.x+puck.r>goal.x && puck.y>goal.y && puck.y<goal.y+goal.h){
        setTimeout(()=>alert("GOAL! ðŸ¥…"),10);
        init();
      }
    }

    function tryShoot(player){
      const stickLen=36;
      const sx=player.x+Math.cos(player.dir)*stickLen;
      const sy=player.y+Math.sin(player.dir)*stickLen;
      if(Math.hypot(puck.x-sx,puck.y-sy)<20){
        puck.dx=Math.cos(player.dir)*8;
        puck.dy=Math.sin(player.dir)*8;
      }
    }

    function drawPlayer(p){
      // Head
      ctx.beginPath();
      ctx.arc(p.x,p.y-18,9,0,Math.PI*2);
      ctx.fillStyle='#222';
      ctx.fill();
      // Body
      ctx.strokeStyle='#222';
      ctx.lineWidth=3;
      ctx.beginPath();
      ctx.moveTo(p.x,p.y-10); ctx.lineTo(p.x,p.y+14); ctx.stroke();
      // Legs
      ctx.beginPath();
      ctx.moveTo(p.x,p.y+14); ctx.lineTo(p.x-10,p.y+32);
      ctx.moveTo(p.x,p.y+14); ctx.lineTo(p.x+10,p.y+32);
      ctx.stroke();
      // Arms
      ctx.beginPath();
      ctx.moveTo(p.x-12,p.y-2); ctx.lineTo(p.x-2,p.y+6); ctx.stroke();
      // Stick (shaft + blade)
      const stickLen=36;
      const sx=p.x+Math.cos(p.dir)*6;
      const sy=p.y-6+Math.sin(p.dir)*6;
      const ex=p.x+Math.cos(p.dir)*(6+stickLen);
      const ey=p.y-6+Math.sin(p.dir)*(6+stickLen);
      ctx.strokeStyle='#5a3b1f'; ctx.lineWidth=4;
      ctx.beginPath(); ctx.moveTo(sx,sy); ctx.lineTo(ex,ey); ctx.stroke();
      // Blade
      ctx.strokeStyle='#222'; ctx.lineWidth=4;
      ctx.beginPath();
      ctx.moveTo(ex,ey);
      ctx.lineTo(ex+Math.cos(p.dir+Math.PI/2)*12,ey+Math.sin(p.dir+Math.PI/2)*12);
      ctx.stroke();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      // Goal
      ctx.fillStyle='#d33';
      ctx.fillRect(goal.x,goal.y,goal.w,goal.h);
      // Puck
      ctx.beginPath();
      ctx.arc(puck.x,puck.y,puck.r,0,Math.PI*2);
      ctx.fillStyle='#111'; ctx.fill();
      // Players
      players.forEach(drawPlayer);
    }

    function loop(){
      update();
      draw();
      requestAnimationFrame(loop);
    }
  </script>
</body>
</html>
